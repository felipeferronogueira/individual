<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard de Monitoramento de Hardware - Ventiladores Pulmonares</title>

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f9fafb;
      color: #111827;
      min-height: 100vh;
    }

    /* Header */
    header {
      background: linear-gradient(135deg, #115e59 0%, #0f766e 100%);
      color: white;
      padding: 32px 32px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }

    .header-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .header-icon-box {
      padding: 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .header-icon-box svg {
      width: 32px;
      height: 32px;
      color: white;
    }

    .header-text h1 {
      font-size: 1.75rem;
      margin-bottom: 4px;
    }

    .header-text p {
      color: #a7f3d0;
      font-size: 0.95rem;
    }

    .header-status {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }

    .status-dot {
      width: 8px;
      height: 8px;
      background: #4ade80;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Container */
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 40px 32px;
    }

    /* Banner de Análise Geral */
    .analysis-banner {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      padding: 32px;
      margin-bottom: 32px;
    }

    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 32px;
    }

    @media (max-width: 1100px) {
      .analysis-grid {
        grid-template-columns: 1fr;
      }
    }

    .analysis-section {
      flex: 1;
    }

    .analysis-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .analysis-icon {
      padding: 12px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .analysis-icon svg {
      width: 24px;
      height: 24px;
    }

    .analysis-icon.red {
      background: #fef2f2;
    }

    .analysis-icon.red svg {
      color: #dc2626;
    }

    .analysis-icon.orange {
      background: #fff7ed;
    }

    .analysis-icon.orange svg {
      color: #ea580c;
    }

    .analysis-icon.blue {
      background: #eff6ff;
    }

    .analysis-icon.blue svg {
      color: #2563eb;
    }

    .analysis-title {
      color: #374151;
      text-transform: uppercase;
      font-size: 0.875rem;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    .analysis-subtitle {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .risk-box {
      background: linear-gradient(135deg, #fef2f2 0%, #fed7aa 100%);
      border: 1px solid #fca5a5;
      border-radius: 8px;
      padding: 20px;
    }

    .risk-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
    }

    .risk-item {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .risk-item-label {
      margin-bottom: 4px;
    }

    .risk-item-value {
      color: #111827;
      font-size: 1rem;
      margin-bottom: 4px;
    }

    .risk-item-value.danger {
      color: #dc2626;
      font-weight: 600;
    }

    .risk-item-sub {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .critical-areas {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .critical-area-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff7ed;
      border: 1px solid #fed7aa;
      border-radius: 8px;
      padding: 12px;
    }

    .critical-area-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .critical-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .critical-dot.yellow {
      background: #eab308;
    }

    .critical-dot.red {
      background: #dc2626;
    }

    .critical-area-name {
      color: #111827;
      font-weight: 600;
    }

    .critical-area-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .critical-badge {
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.875rem;
    }

    .critical-badge.yellow {
      background: #fef3c7;
      color: #78350f;
    }

    .critical-badge.red {
      background: #fee2e2;
      color: #7f1d1d;
    }

    .critical-alerts {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .recommendation-box {
      background: linear-gradient(135deg, #eff6ff 0%, #d1fae5 100%);
      border: 1px solid #93c5fd;
      border-radius: 8px;
      padding: 20px;
    }

    .recommendation-value {
      color: #1e3a8a;
      font-size: 1rem;
      margin-bottom: 8px;
    }

    .recommendation-sub {
      color: #4b5563;
      font-size: 0.875rem;
      margin-bottom: 16px;
    }

    .recommendation-action {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #374151;
      font-size: 0.875rem;
    }

    .recommendation-action svg {
      width: 16px;
      height: 16px;
      color: #0f766e;
    }

    /* KPIs Grid */
    .kpis-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .kpi-card {
      position: relative;
      background: white;
      border-radius: 12px;
      padding: 32px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border-bottom: 4px solid;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .kpi-card:hover {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      transform: translateY(-4px);
    }

    .kpi-card.green {
      border-bottom-color: #16a34a;
    }

    .kpi-card.red {
      border-bottom-color: #dc2626;
    }

    .kpi-card.teal {
      border-bottom-color: #0f766e;
    }

    .kpi-bg-circle {
      position: absolute;
      top: 0;
      right: 0;
      width: 128px;
      height: 128px;
      border-radius: 50%;
      opacity: 0.05;
      transform: translate(48px, -48px);
    }

    .kpi-card.green .kpi-bg-circle {
      background: #16a34a;
    }

    .kpi-card.red .kpi-bg-circle {
      background: #dc2626;
    }

    .kpi-card.teal .kpi-bg-circle {
      background: #0f766e;
    }

    .kpi-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
      position: relative;
      z-index: 10;
    }

    .kpi-icon {
      padding: 12px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .kpi-card.green .kpi-icon {
      background: #f0fdf4;
    }

    .kpi-card.green .kpi-icon svg {
      color: #16a34a;
      width: 24px;
      height: 24px;
    }

    .kpi-card.red .kpi-icon {
      background: #fef2f2;
    }

    .kpi-card.red .kpi-icon svg {
      color: #dc2626;
      width: 24px;
      height: 24px;
    }

    .kpi-card.teal .kpi-icon {
      background: #f0fdfa;
    }

    .kpi-card.teal .kpi-icon svg {
      color: #0f766e;
      width: 24px;
      height: 24px;
    }

    .kpi-title {
      color: #4b5563;
      text-transform: uppercase;
      font-size: 0.875rem;
      font-weight: 600;
      letter-spacing: 0.05em;
    }

    .kpi-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #111827;
      margin-bottom: 12px;
      position: relative;
      z-index: 10;
    }

    .kpi-subtitle {
      color: #6b7280;
      font-size: 0.875rem;
      position: relative;
      z-index: 10;
    }

    /* Distribuição de Ventiladores */
    .distribution-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      padding: 32px;
      margin-bottom: 40px;
    }

    .distribution-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 32px;
    }

    .distribution-title-area {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .distribution-icon-box {
      padding: 16px;
      background: #f0fdfa;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .distribution-icon-box svg {
      width: 32px;
      height: 32px;
      color: #0f766e;
    }

    .distribution-title {
      color: #111827;
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .distribution-subtitle {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .distribution-total {
      padding: 12px 24px;
      background: #f0fdfa;
      border: 1px solid #99f6e4;
      border-radius: 8px;
    }

    .distribution-total-label {
      color: #4b5563;
      font-size: 0.875rem;
      margin-bottom: 4px;
    }

    .distribution-total-value {
      color: #111827;
      font-weight: 600;
      text-align: center;
    }

    .areas-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    @media (max-width: 1400px) {
      .areas-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    @media (max-width: 900px) {
      .areas-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 600px) {
      .areas-grid {
        grid-template-columns: 1fr;
      }
    }

    .area-card {
      position: relative;
      background: #f9fafb;
      border-radius: 8px;
      padding: 24px;
      border-left: 4px solid;
      transition: all 0.3s ease;
    }

    .area-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .area-card.risk-low {
      border-left-color: #16a34a;
    }

    .area-card.risk-medium {
      border-left-color: #eab308;
    }

    .area-card.risk-high {
      border-left-color: #dc2626;
    }

    .area-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .area-name {
      color: #111827;
      font-weight: 600;
      font-size: 1rem;
    }

    .area-trend svg {
      width: 20px;
      height: 20px;
    }

    .area-trend.up svg {
      color: #16a34a;
    }

    .area-trend.down svg {
      color: #dc2626;
    }

    .area-total {
      margin-bottom: 20px;
    }

    .area-total-number {
      color: #111827;
      font-size: 1.25rem;
      font-weight: 600;
      margin-right: 8px;
    }

    .area-total-label {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .stability-bar {
      position: relative;
      width: 100%;
      height: 12px;
      background: #e5e7eb;
      border-radius: 9999px;
      overflow: hidden;
      margin-bottom: 12px;
    }

    .stability-bar-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: #16a34a;
      border-radius: 9999px;
      transition: width 0.5s ease;
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
      margin-bottom: 12px;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 8px;
    }

    .status-item.stable {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
    }

    .status-item.stable svg {
      width: 16px;
      height: 16px;
      color: #16a34a;
    }

    .status-item.stable span {
      color: #15803d;
      font-size: 0.875rem;
    }

    .status-item.alert {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .status-item.alert svg {
      width: 16px;
      height: 16px;
      color: #dc2626;
    }

    .status-item.alert span {
      color: #991b1b;
      font-size: 0.875rem;
    }

    .hardware-section {
      margin-bottom: 16px;
    }

    .hardware-label {
      color: #4b5563;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 8px;
    }

    .hardware-metrics {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .hardware-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
    }

    .hardware-item-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .hardware-item-left svg {
      width: 16px;
      height: 16px;
    }

    .hardware-item-left.cpu svg {
      color: #2563eb;
    }

    .hardware-item-left.battery svg {
      color: #16a34a;
    }

    .hardware-item-label {
      color: #374151;
      font-size: 0.875rem;
    }

    .hardware-item-value {
      font-size: 0.875rem;
    }

    .hardware-item-value.normal {
      color: #2563eb;
    }

    .hardware-item-value.warning {
      color: #dc2626;
      font-weight: 600;
    }

    .risk-box-area {
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 12px;
    }

    .risk-box-area.low {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
    }

    .risk-box-area.medium {
      background: #fefce8;
      border: 1px solid #fde047;
    }

    .risk-box-area.high {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .risk-box-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .risk-box-label {
      color: #374151;
      font-size: 0.875rem;
    }

    .risk-box-level {
      font-weight: 600;
    }

    .risk-box-level.low {
      color: #15803d;
    }

    .risk-box-level.medium {
      color: #a16207;
    }

    .risk-box-level.high {
      color: #991b1b;
    }

    .risk-box-percent {
      font-size: 1.125rem;
    }

    .recommendation-box-area {
      background: #eff6ff;
      border: 1px solid #93c5fd;
      border-radius: 8px;
      padding: 12px;
      margin-bottom: 12px;
    }

    .recommendation-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .recommendation-header svg {
      width: 16px;
      height: 16px;
      color: #2563eb;
    }

    .recommendation-label {
      color: #1e40af;
      font-size: 0.875rem;
    }

    .recommendation-text {
      color: #1e3a8a;
      font-size: 0.875rem;
    }

    .recommendation-text strong {
      font-weight: 700;
    }

    .relocate-box {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: #f0fdfa;
      border: 1px solid #99f6e4;
      border-radius: 8px;
    }

    .relocate-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .relocate-left svg {
      width: 16px;
      height: 16px;
      color: #0f766e;
    }

    .relocate-label {
      color: #374151;
      font-size: 0.875rem;
    }

    .relocate-value {
      color: #0f766e;
      font-weight: 600;
    }

    /* Legenda */
    .legend-section {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid #e5e7eb;
    }

    .legend-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
    }

    @media (max-width: 900px) {
      .legend-grid {
        grid-template-columns: 1fr;
      }
    }

    .legend-item {
      display: flex;
      align-items: start;
      gap: 12px;
    }

    .legend-icon {
      padding: 8px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2px;
    }

    .legend-icon.green {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;
    }

    .legend-icon.green svg {
      width: 16px;
      height: 16px;
      color: #16a34a;
    }

    .legend-icon.red {
      background: #fef2f2;
      border: 1px solid #fecaca;
    }

    .legend-icon.red svg {
      width: 16px;
      height: 16px;
      color: #dc2626;
    }

    .legend-icon.teal {
      background: #f0fdfa;
      border: 1px solid #99f6e4;
    }

    .legend-icon.teal svg {
      width: 16px;
      height: 16px;
      color: #0f766e;
    }

    .legend-text-title {
      color: #15803d;
      margin-bottom: 4px;
      font-weight: 600;
      font-size: 0.875rem;
    }

    .legend-text-title.red {
      color: #991b1b;
    }

    .legend-text-title.teal {
      color: #0f766e;
    }

    .legend-text-desc {
      color: #6b7280;
      font-size: 0.75rem;
    }

    /* Gráfico de Umidade */
    .humidity-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      padding: 32px;
    }

    .humidity-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 24px;
    }

    .humidity-icon-box {
      padding: 12px;
      background: #eff6ff;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .humidity-icon-box svg {
      width: 24px;
      height: 24px;
      color: #2563eb;
    }

    .humidity-title {
      color: #111827;
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .humidity-subtitle {
      color: #6b7280;
      font-size: 0.875rem;
    }

    .humidity-alert {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 16px;
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 8px;
      width: fit-content;
      margin: 24px auto 0;
    }

    .humidity-alert svg {
      width: 16px;
      height: 16px;
      color: #dc2626;
    }

    .humidity-alert span {
      color: #991b1b;
      font-size: 0.875rem;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="header-icon-box">
          <i data-lucide="activity"></i>
        </div>
        <div class="header-text">
          <h1>Sistema de Monitoramento de Hardware</h1>
          <p>Ventiladores Pulmonares Hospitalares — São Paulo</p>
        </div>
      </div>
      <div class="header-status">
        <div class="status-dot"></div>
        <span>Sistema Operacional</span>
      </div>
    </div>
  </header>

  <!-- Container Principal -->
  <div class="container">
    <!-- Banner de Análise Geral -->
    <div class="analysis-banner">
      <div class="analysis-grid">
        <!-- Análise de Risco -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon red">
              <i data-lucide="alert-triangle"></i>
            </div>
            <div>
              <h3 class="analysis-title">Análise de Risco</h3>
              <p class="analysis-subtitle">Período atual e histórico</p>
            </div>
          </div>
          <div class="risk-box">
            <div class="risk-grid">
              <div class="risk-item">
                <div class="risk-item-label">Relatório Histórico</div>
                <div class="risk-item-value">Pico de Umidade</div>
                <div class="risk-item-sub">Ago/Set - 3 meses atrás</div>
              </div>
              <div class="risk-item">
                <div class="risk-item-label">Risco Atual</div>
                <div class="risk-item-value danger">Alto</div>
                <div class="risk-item-sub">Nov/Dez - Alta Demanda</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Áreas Críticas -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon orange">
              <i data-lucide="file-text"></i>
            </div>
            <div>
              <h3 class="analysis-title">Áreas Críticas</h3>
              <p class="analysis-subtitle">Necessitam atenção imediata</p>
            </div>
          </div>
          <div class="critical-areas" id="criticalAreasContainer">
            <!-- Preenchido via JavaScript -->
          </div>
        </div>

        <!-- Recomendação -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon blue">
              <i data-lucide="lightbulb"></i>
            </div>
            <div>
              <h3 class="analysis-title">Recomendação</h3>
              <p class="analysis-subtitle">Ação prioritária sugerida</p>
            </div>
          </div>
          <div class="recommendation-box">
            <div class="recommendation-value">Reforçar UTI e PS</div>
            <div class="recommendation-sub">Ação prioritária</div>
            <div class="recommendation-action">
              <i data-lucide="arrow-right"></i>
              <span>Remanejamento recomendado: <span id="totalRelocate"></span> ventiladores disponíveis</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- KPIs Grid -->
    <div class="kpis-grid">
      <!-- KPI 1: Índice de Estabilidade -->
      <div class="kpi-card green">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="gauge"></i>
          </div>
          <h3 class="kpi-title">Índice de Estabilidade</h3>
        </div>
        <p class="kpi-value"><span id="stabilityIndex"></span>%</p>
        <p class="kpi-subtitle"><span id="stabilityText"></span></p>
      </div>

      <!-- KPI 2: Alertas de Hardware -->
      <div class="kpi-card red">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="alert-triangle"></i>
          </div>
          <h3 class="kpi-title">Alertas de Hardware</h3>
        </div>
        <p class="kpi-value"><span id="totalAlerts"></span> Alertas</p>
        <p class="kpi-subtitle"><span id="criticalAreaText"></span></p>
      </div>

      <!-- KPI 3: Remanejamento Disponível -->
      <div class="kpi-card teal">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="refresh-ccw"></i>
          </div>
          <h3 class="kpi-title">Remanejamento Disponível</h3>
        </div>
        <p class="kpi-value"><span id="totalCanRelocate"></span> Unidades</p>
        <p class="kpi-subtitle">Podem ser redistribuídas para áreas críticas</p>
      </div>
    </div>

    <!-- Distribuição de Ventiladores -->
    <div class="distribution-card">
      <div class="distribution-header">
        <div class="distribution-title-area">
          <div class="distribution-icon-box">
            <i data-lucide="wind"></i>
          </div>
          <div>
            <h2 class="distribution-title">Distribuição e Balanceamento de Ventiladores</h2>
            <p class="distribution-subtitle">Monitoramento de hardware por área hospitalar</p>
          </div>
        </div>
        <div class="distribution-total">
          <div class="distribution-total-label">Total de Ventiladores</div>
          <div class="distribution-total-value"><span id="totalVentilators"></span> unidades</div>
        </div>
      </div>

      <!-- Grid de Áreas -->
      <div class="areas-grid" id="areasGrid">
        <!-- Preenchido via JavaScript -->
      </div>

      <!-- Legenda -->
      <div class="legend-section">
        <div class="legend-grid">
          <div class="legend-item">
            <div class="legend-icon green">
              <i data-lucide="check-circle-2"></i>
            </div>
            <div>
              <div class="legend-text-title">Estáveis</div>
              <div class="legend-text-desc">Ventiladores operando com hardware normal</div>
            </div>
          </div>
          <div class="legend-item">
            <div class="legend-icon red">
              <i data-lucide="x-circle"></i>
            </div>
            <div>
              <div class="legend-text-title red">Com Alertas</div>
              <div class="legend-text-desc">Ventiladores com falhas de hardware detectadas</div>
            </div>
          </div>
          <div class="legend-item">
            <div class="legend-icon teal">
              <i data-lucide="refresh-ccw"></i>
            </div>
            <div>
              <div class="legend-text-title teal">Disponíveis para Remanejamento</div>
              <div class="legend-text-desc">Unidades que podem ser transferidas para outras áreas</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Gráfico de Umidade -->
    <div class="humidity-card">
      <div class="humidity-header">
        <div class="humidity-icon-box">
          <i data-lucide="droplets"></i>
        </div>
        <div>
          <h3 class="humidity-title">Evolução Mensal da Umidade</h3>
          <p class="humidity-subtitle">Dados ambientais — São Paulo</p>
        </div>
      </div>
      <div id="humidityChart" style="height: 280px;"></div>
      <div class="humidity-alert">
        <i data-lucide="alert-triangle"></i>
        <span>Pico do período: Agosto (94%)</span>
      </div>
    </div>
  </div>

  <script>
    // Dados de Ventiladores por Área
    const ventilatorAreas = [
      {
        name: "UTI",
        total: 20,
        stable: 17,
        alerts: 3,
        risk: 15,
        canRelocate: 4,
        recommendedToReceive: 5,
        cpuAvg: 68,
        batteryAvg: 92,
        trend: "up"
      },
      {
        name: "Pronto Socorro",
        total: 12,
        stable: 8,
        alerts: 4,
        risk: 33,
        canRelocate: 2,
        recommendedToReceive: 3,
        cpuAvg: 75,
        batteryAvg: 85,
        trend: "up"
      },
      {
        name: "Cirurgia",
        total: 6,
        stable: 5,
        alerts: 1,
        risk: 17,
        canRelocate: 2,
        recommendedToReceive: 0,
        cpuAvg: 52,
        batteryAvg: 95,
        trend: "down"
      },
      {
        name: "Enfermaria",
        total: 2,
        stable: 1,
        alerts: 1,
        risk: 50,
        canRelocate: 0,
        recommendedToReceive: 2,
        cpuAvg: 82,
        batteryAvg: 78,
        trend: "down"
      },
      {
        name: "Pediatria",
        total: 3,
        stable: 2,
        alerts: 1,
        risk: 33,
        canRelocate: 1,
        recommendedToReceive: 1,
        cpuAvg: 71,
        batteryAvg: 88,
        trend: "down"
      }
    ];

    // Função para obter cor de risco
    function getRiskClass(risk) {
      if (risk <= 20) return { class: 'low', label: 'Baixo', dotClass: 'green' };
      if (risk <= 35) return { class: 'medium', label: 'Moderado', dotClass: 'yellow' };
      return { class: 'high', label: 'Alto', dotClass: 'red' };
    }

    // Calcular totais
    const totalVentilators = ventilatorAreas.reduce((sum, area) => sum + area.total, 0);
    const totalStable = ventilatorAreas.reduce((sum, area) => sum + area.stable, 0);
    const totalAlerts = ventilatorAreas.reduce((sum, area) => sum + area.alerts, 0);
    const totalCanRelocate = ventilatorAreas.reduce((sum, area) => sum + area.canRelocate, 0);
    const stabilityIndex = Math.round((totalStable / totalVentilators) * 100);
    const highestRiskArea = ventilatorAreas.reduce((max, area) => area.risk > max.risk ? area : max);
    const areasNeedingReinforcement = ventilatorAreas.filter(area => area.risk >= 30);

    // Preencher KPIs
    document.getElementById('stabilityIndex').textContent = stabilityIndex;
    document.getElementById('stabilityText').textContent = `${totalStable} de ${totalVentilators} ventiladores estáveis`;
    document.getElementById('totalAlerts').textContent = totalAlerts;
    document.getElementById('criticalAreaText').textContent = `Área mais crítica: ${highestRiskArea.name} (${highestRiskArea.risk}%)`;
    document.getElementById('totalCanRelocate').textContent = totalCanRelocate;
    document.getElementById('totalRelocate').textContent = totalCanRelocate;
    document.getElementById('totalVentilators').textContent = totalVentilators;

    // Preencher Áreas Críticas
    const criticalAreasContainer = document.getElementById('criticalAreasContainer');
    areasNeedingReinforcement.forEach(area => {
      const riskData = getRiskClass(area.risk);
      const div = document.createElement('div');
      div.className = 'critical-area-item';
      div.innerHTML = `
        <div class="critical-area-left">
          <div class="critical-dot ${riskData.dotClass}"></div>
          <span class="critical-area-name">${area.name}</span>
        </div>
        <div class="critical-area-right">
          <span class="critical-badge ${riskData.dotClass}">
            ${area.risk}% risco
          </span>
          <span class="critical-alerts">${area.alerts} alertas</span>
        </div>
      `;
      criticalAreasContainer.appendChild(div);
    });

    // Preencher Grid de Áreas
    const areasGrid = document.getElementById('areasGrid');
    ventilatorAreas.forEach(area => {
      const riskData = getRiskClass(area.risk);
      const stabilityPercent = Math.round((area.stable / area.total) * 100);

      const areaCard = document.createElement('div');
      areaCard.className = `area-card risk-${riskData.class}`;
      
      let recommendationHTML = '';
      if (area.recommendedToReceive > 0) {
        recommendationHTML = `
          <div class="recommendation-box-area">
            <div class="recommendation-header">
              <i data-lucide="lightbulb"></i>
              <span class="recommendation-label">Recomendação</span>
            </div>
            <div class="recommendation-text">
              Adicionar <strong>+${area.recommendedToReceive}</strong> ventiladores
            </div>
          </div>
        `;
      }

      areaCard.innerHTML = `
        <div class="area-header">
          <h3 class="area-name">${area.name}</h3>
          <div class="area-trend ${area.trend}">
            <i data-lucide="${area.trend === 'up' ? 'trending-up' : 'trending-down'}"></i>
          </div>
        </div>
        
        <div class="area-total">
          <span class="area-total-number">${area.total}</span>
          <span class="area-total-label">ventiladores</span>
        </div>
        
        <div class="stability-bar">
          <div class="stability-bar-fill" style="width: ${stabilityPercent}%"></div>
        </div>
        
        <div class="status-grid">
          <div class="status-item stable">
            <i data-lucide="check-circle-2"></i>
            <span>${area.stable}</span>
          </div>
          <div class="status-item alert">
            <i data-lucide="x-circle"></i>
            <span>${area.alerts}</span>
          </div>
        </div>
        
        <div class="hardware-section">
          <div class="hardware-label">Médias de Hardware</div>
          <div class="hardware-metrics">
            <div class="hardware-item">
              <div class="hardware-item-left cpu">
                <i data-lucide="cpu"></i>
                <span class="hardware-item-label">CPU média</span>
              </div>
              <span class="hardware-item-value ${area.cpuAvg > 75 ? 'warning' : 'normal'}">${area.cpuAvg}%</span>
            </div>
            <div class="hardware-item">
              <div class="hardware-item-left battery">
                <i data-lucide="battery"></i>
                <span class="hardware-item-label">Bateria média</span>
              </div>
              <span class="hardware-item-value ${area.batteryAvg < 80 ? 'warning' : 'normal'}">${area.batteryAvg}%</span>
            </div>
          </div>
        </div>
        
        <div class="risk-box-area ${riskData.class}">
          <div class="risk-box-header">
            <span class="risk-box-label">Nível de Risco</span>
            <span class="risk-box-level ${riskData.class}">${riskData.label}</span>
          </div>
          <div class="risk-box-percent ${riskData.class}">${area.risk}%</div>
        </div>
        
        ${recommendationHTML}
        
        <div class="relocate-box">
          <div class="relocate-left">
            <i data-lucide="refresh-ccw"></i>
            <span class="relocate-label">Disponíveis</span>
          </div>
          <span class="relocate-value">${area.canRelocate}</span>
        </div>
      `;
      
      areasGrid.appendChild(areaCard);
    });

    // Inicializar ícones Lucide
    lucide.createIcons();

    // Dados de Umidade
    const humidityData = [
      { month: 'Jan', value: 65 },
      { month: 'Fev', value: 67 },
      { month: 'Mar', value: 70 },
      { month: 'Abr', value: 69 },
      { month: 'Mai', value: 70 },
      { month: 'Jun', value: 72 },
      { month: 'Jul', value: 75 },
      { month: 'Ago', value: 94 },
      { month: 'Set', value: 87 },
      { month: 'Out', value: 76 },
      { month: 'Nov', value: 74 },
      { month: 'Dez', value: 0 },
    ];

    // Renderizar Gráfico de Umidade com ApexCharts
    const humidityOptions = {
      chart: {
        type: 'bar',
        height: 280,
        toolbar: { show: false },
        fontFamily: 'Segoe UI, Arial, sans-serif'
      },
      series: [{
        name: 'Umidade',
        data: humidityData.map(d => d.value)
      }],
      xaxis: {
        categories: humidityData.map(d => d.month),
        labels: {
          style: {
            colors: '#374151',
            fontSize: '12px',
            fontWeight: 600
          }
        },
        axisBorder: { show: true, color: '#6b7280' },
        axisTicks: { show: false }
      },
      yaxis: {
        labels: {
          style: {
            colors: '#374151',
            fontSize: '12px',
            fontWeight: 600
          }
        }
      },
      dataLabels: {
        enabled: true,
        style: {
          fontSize: '12px',
          fontWeight: 700,
          colors: ['#fff']
        },
        offsetY: -20
      },
      grid: {
        show: true,
        borderColor: '#e5e7eb',
        strokeDashArray: 3,
        xaxis: { lines: { show: false } }
      },
      colors: humidityData.map(d => d.month === 'Ago' ? '#dc2626' : '#3b82f6'),
      plotOptions: {
        bar: {
          distributed: true,
          borderRadius: 8,
          borderRadiusApplication: 'end',
          columnWidth: '60%'
        }
      },
      legend: { show: false },
      tooltip: {
        enabled: true,
        y: {
          formatter: function (val) { return val + '%' }
        }
      }
    };

    const humidityChart = new ApexCharts(document.querySelector("#humidityChart"), humidityOptions);
    humidityChart.render();
  </script>
</body>

</html>
