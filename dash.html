<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard de Monitoramento de Hardware - Ventiladores Pulmonares</title>

  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <!-- ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #F3F6F9;
      color: #1a2332;
      min-height: 100vh;
      line-height: 1.6;
    }

    /* Header */
    header {
      background: linear-gradient(135deg, #0f766e 0%, #115e59 100%);
      color: white;
      padding: 28px 32px;
      box-shadow: 0 2px 16px rgba(15, 118, 110, 0.15);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .header-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .header-icon-box {
      padding: 14px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: 14px;
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .header-icon-box svg {
      width: 28px;
      height: 28px;
      color: white;
    }

    .header-text h1 {
      font-size: 1.65rem;
      margin-bottom: 5px;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .header-text p {
      color: #a7f3d0;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .header-status {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      background: rgba(255, 255, 255, 0.12);
      border-radius: 10px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .status-dot {
      width: 7px;
      height: 7px;
      background: #4ade80;
      border-radius: 50%;
      animation: pulse 2s infinite;
      box-shadow: 0 0 8px rgba(74, 222, 128, 0.6);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.1); }
    }

    .header-status span {
      font-size: 0.875rem;
      font-weight: 600;
    }

    /* Container */
    .container {
      max-width: 1600px;
      margin: 0 auto;
      padding: 36px 32px;
    }

    /* Banner de Análise Geral */
    .analysis-banner {
      background: #F9FAFB;
      border-radius: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02);
      border: 1px solid #DCE2E8;
      padding: 32px;
      margin-bottom: 32px;
    }

    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 28px;
    }

    @media (max-width: 1100px) {
      .analysis-grid {
        grid-template-columns: 1fr;
      }
    }

    .analysis-section {
      flex: 1;
    }

    .analysis-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 18px;
    }

    .analysis-icon {
      padding: 11px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid;
    }

    .analysis-icon svg {
      width: 22px;
      height: 22px;
    }

    .analysis-icon.red {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border-color: #fecaca;
    }

    .analysis-icon.red svg {
      color: #dc2626;
    }

    .analysis-icon.orange {
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
      border-color: #fed7aa;
    }

    .analysis-icon.orange svg {
      color: #ea580c;
    }

    .analysis-icon.blue {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border-color: #bfdbfe;
    }

    .analysis-icon.blue svg {
      color: #2563eb;
    }

    .analysis-title {
      color: #475569;
      text-transform: uppercase;
      font-size: 0.8rem;
      font-weight: 700;
      letter-spacing: 0.08em;
    }

    .analysis-subtitle {
      color: #94a3b8;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .risk-box {
      background: linear-gradient(135deg, #fef2f2 0%, #ffe4e6 100%);
      border: 1.5px solid #fca5a5;
      border-radius: 12px;
      padding: 22px;
    }

    .risk-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .risk-item {
      color: #64748b;
      font-size: 0.85rem;
    }

    .risk-item-label {
      margin-bottom: 6px;
      font-weight: 600;
      color: #475569;
    }

    .risk-item-value {
      color: #1e293b;
      font-size: 1.05rem;
      margin-bottom: 5px;
      font-weight: 700;
    }

    .risk-item-value.danger {
      color: #dc2626;
      font-weight: 800;
    }

    .risk-item-sub {
      color: #64748b;
      font-size: 0.8rem;
    }

    .critical-areas {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .critical-area-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
      border: 1.5px solid #fed7aa;
      border-radius: 10px;
      padding: 14px 16px;
      transition: all 0.2s ease;
    }

    .critical-area-item:hover {
      transform: translateX(3px);
      box-shadow: 0 2px 8px rgba(234, 88, 12, 0.1);
    }

    .critical-area-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .critical-dot {
      width: 9px;
      height: 9px;
      border-radius: 50%;
      box-shadow: 0 0 6px currentColor;
    }

    .critical-dot.yellow {
      background: #eab308;
      color: #eab308;
    }

    .critical-dot.red {
      background: #dc2626;
      color: #dc2626;
    }

    .critical-area-name {
      color: #1e293b;
      font-weight: 700;
      font-size: 0.95rem;
    }

    .critical-area-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .critical-badge {
      padding: 5px 14px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 700;
      border: 1px solid;
    }

    .critical-badge.yellow {
      background: #fef3c7;
      color: #78350f;
      border-color: #fde047;
    }

    .critical-badge.red {
      background: #fee2e2;
      color: #7f1d1d;
      border-color: #fca5a5;
    }

    .critical-alerts {
      color: #64748b;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .recommendation-box {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border: 1.5px solid #93c5fd;
      border-radius: 12px;
      padding: 22px;
    }

    .recommendation-value {
      color: #1e3a8a;
      font-size: 1.05rem;
      margin-bottom: 10px;
      font-weight: 800;
    }

    .recommendation-sub {
      color: #475569;
      font-size: 0.85rem;
      margin-bottom: 16px;
      font-weight: 600;
    }

    .recommendation-action {
      display: flex;
      align-items: center;
      gap: 9px;
      color: #334155;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .recommendation-action svg {
      width: 17px;
      height: 17px;
      color: #0f766e;
    }

    /* KPIs Grid */
    .kpis-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-bottom: 36px;
    }

    .kpi-card {
      position: relative;
      background: #F9FAFB;
      border-radius: 16px;
      padding: 32px 28px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02);
      border: 1px solid #DCE2E8;
      border-bottom: 3px solid;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .kpi-card:hover {
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06), 0 8px 24px rgba(0, 0, 0, 0.04);
      transform: translateY(-3px);
    }

    .kpi-card.green {
      border-bottom-color: #10b981;
    }

    .kpi-card.red {
      border-bottom-color: #ef4444;
    }

    .kpi-card.teal {
      border-bottom-color: #14b8a6;
    }

    .kpi-bg-circle {
      position: absolute;
      top: -20px;
      right: -20px;
      width: 140px;
      height: 140px;
      border-radius: 50%;
      opacity: 0.04;
    }

    .kpi-card.green .kpi-bg-circle {
      background: #10b981;
    }

    .kpi-card.red .kpi-bg-circle {
      background: #ef4444;
    }

    .kpi-card.teal .kpi-bg-circle {
      background: #14b8a6;
    }

    .kpi-header {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 22px;
      position: relative;
      z-index: 10;
    }

    .kpi-icon {
      padding: 12px;
      border-radius: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid;
    }

    .kpi-card.green .kpi-icon {
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-color: #a7f3d0;
    }

    .kpi-card.green .kpi-icon svg {
      color: #059669;
      width: 24px;
      height: 24px;
    }

    .kpi-card.red .kpi-icon {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border-color: #fecaca;
    }

    .kpi-card.red .kpi-icon svg {
      color: #dc2626;
      width: 24px;
      height: 24px;
    }

    .kpi-card.teal .kpi-icon {
      background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 100%);
      border-color: #99f6e4;
    }

    .kpi-card.teal .kpi-icon svg {
      color: #0d9488;
      width: 24px;
      height: 24px;
    }

    .kpi-title {
      color: #64748b;
      text-transform: uppercase;
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 0.08em;
    }

    .kpi-value {
      font-size: 2rem;
      font-weight: 800;
      color: #1e293b;
      margin-bottom: 10px;
      position: relative;
      z-index: 10;
      letter-spacing: -0.02em;
    }

    .kpi-subtitle {
      color: #64748b;
      font-size: 0.88rem;
      position: relative;
      z-index: 10;
      font-weight: 500;
    }

    /* Distribuição de Ventiladores */
    .distribution-card {
      background: #F9FAFB;
      border-radius: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02);
      border: 1px solid #DCE2E8;
      padding: 36px 32px;
      margin-bottom: 36px;
    }

    .distribution-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 36px;
      padding-bottom: 24px;
      border-bottom: 2px solid #e2e8f0;
    }

    .distribution-title-area {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .distribution-icon-box {
      padding: 16px;
      background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 100%);
      border: 1px solid #99f6e4;
      border-radius: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .distribution-icon-box svg {
      width: 32px;
      height: 32px;
      color: #0d9488;
    }

    .distribution-title {
      color: #1e293b;
      font-size: 1.4rem;
      font-weight: 800;
      margin-bottom: 6px;
      letter-spacing: -0.02em;
    }

    .distribution-subtitle {
      color: #64748b;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .distribution-total {
      padding: 14px 26px;
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border: 1.5px solid #a7f3d0;
      border-radius: 12px;
    }

    .distribution-total-label {
      color: #475569;
      font-size: 0.8rem;
      margin-bottom: 5px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .distribution-total-value {
      color: #1e293b;
      font-weight: 800;
      text-align: center;
      font-size: 1.1rem;
    }

    .areas-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }

    .area-card {
      position: relative;
      background: white;
      border-radius: 14px;
      padding: 26px 24px;
      border-left: 4px solid;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03), 0 2px 6px rgba(0, 0, 0, 0.02);
    }

    .area-card:hover {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 8px 20px rgba(0, 0, 0, 0.04);
      transform: translateY(-2px);
    }

    .area-card.needs-ventilators {
      border-left-color: #3b82f6;
      background: linear-gradient(135deg, #ffffff 0%, #eff6ff 100%);
    }

    .area-card.can-send {
      border-left-color: #10b981;
      background: linear-gradient(135deg, #ffffff 0%, #f0fdf4 100%);
    }

    .area-card.neutral {
      border-left-color: #94a3b8;
      background: white;
    }

    .area-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e2e8f0;
    }

    .area-name {
      color: #1e293b;
      font-weight: 800;
      font-size: 1.15rem;
      letter-spacing: -0.01em;
    }

    .area-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.03em;
      border: 1px solid;
    }

    .area-badge.needs {
      background: #dbeafe;
      color: #1e40af;
      border-color: #93c5fd;
    }

    .area-badge.can-send {
      background: #d1fae5;
      color: #065f46;
      border-color: #6ee7b7;
    }

    .area-badge.neutral {
      background: #f1f5f9;
      color: #475569;
      border-color: #cbd5e1;
    }

    .area-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .stat-item {
      text-align: center;
      padding: 12px 8px;
      background: #f8fafc;
      border-radius: 10px;
      border: 1px solid #e2e8f0;
    }

    .stat-label {
      color: #64748b;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 6px;
    }

    .stat-value {
      color: #1e293b;
      font-size: 1.3rem;
      font-weight: 800;
    }

    .stat-value.highlight {
      color: #3b82f6;
    }

    .stat-value.success {
      color: #10b981;
    }

    .stability-section {
      margin-bottom: 20px;
    }

    .stability-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .stability-label {
      color: #475569;
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .stability-percent {
      color: #1e293b;
      font-size: 0.9rem;
      font-weight: 800;
    }

    .stability-bar {
      position: relative;
      width: 100%;
      height: 10px;
      background: #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
    }

    .stability-bar-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: linear-gradient(90deg, #10b981 0%, #059669 100%);
      border-radius: 10px;
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 0 8px rgba(16, 185, 129, 0.3);
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 18px;
    }

    .status-item {
      display: flex;
      align-items: center;
      gap: 9px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid;
    }

    .status-item.stable {
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-color: #a7f3d0;
    }

    .status-item.stable svg {
      width: 18px;
      height: 18px;
      color: #059669;
    }

    .status-item.stable span {
      color: #065f46;
      font-size: 0.9rem;
      font-weight: 700;
    }

    .status-item.alert {
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border-color: #fecaca;
    }

    .status-item.alert svg {
      width: 18px;
      height: 18px;
      color: #dc2626;
    }

    .status-item.alert span {
      color: #991b1b;
      font-size: 0.9rem;
      font-weight: 700;
    }

    .hardware-section {
      margin-bottom: 18px;
    }

    .hardware-label {
      color: #475569;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .hardware-metrics {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .hardware-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      transition: all 0.2s ease;
    }

    .hardware-item:hover {
      background: #f1f5f9;
      border-color: #cbd5e1;
    }

    .hardware-item-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .hardware-item-left svg {
      width: 18px;
      height: 18px;
    }

    .hardware-item-left.cpu svg {
      color: #3b82f6;
    }

    .hardware-item-left.battery svg {
      color: #10b981;
    }

    .hardware-item-label {
      color: #475569;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .hardware-item-value {
      font-size: 0.9rem;
      font-weight: 800;
    }

    .hardware-item-value.normal {
      color: #3b82f6;
    }

    .hardware-item-value.warning {
      color: #ef4444;
    }

    /* Recommendation Box - Área precisa receber */
    .recommendation-box-area {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border: 1.5px solid #60a5fa;
      border-radius: 12px;
      padding: 16px 18px;
      margin-bottom: 14px;
    }

    .recommendation-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .recommendation-header svg {
      width: 20px;
      height: 20px;
      color: #1d4ed8;
    }

    .recommendation-label {
      color: #1e40af;
      font-size: 0.8rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .recommendation-text {
      color: #1e3a8a;
      font-size: 1rem;
      font-weight: 700;
      line-height: 1.4;
    }

    .recommendation-text strong {
      font-weight: 900;
      color: #1e40af;
    }

    /* Send Box - Área pode enviar */
    .send-box-area {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      border: 1.5px solid #6ee7b7;
      border-radius: 12px;
      padding: 16px 18px;
      margin-bottom: 14px;
    }

    .send-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .send-header svg {
      width: 20px;
      height: 20px;
      color: #059669;
    }

    .send-label {
      color: #065f46;
      font-size: 0.8rem;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .send-text {
      color: #064e3b;
      font-size: 1rem;
      font-weight: 700;
      line-height: 1.4;
    }

    .send-text strong {
      font-weight: 900;
      color: #065f46;
    }

    .available-box {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: #f8fafc;
      border: 1.5px solid #cbd5e1;
      border-radius: 10px;
    }

    .available-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .available-left svg {
      width: 18px;
      height: 18px;
      color: #64748b;
    }

    .available-label {
      color: #475569;
      font-size: 0.85rem;
      font-weight: 700;
    }

    .available-value {
      color: #1e293b;
      font-weight: 800;
      font-size: 1.05rem;
    }

    .available-value.zero {
      color: #94a3b8;
    }

    .available-value.positive {
      color: #059669;
    }

    /* Legenda */
    .legend-section {
      margin-top: 36px;
      padding-top: 28px;
      border-top: 2px solid #e2e8f0;
    }

    .legend-title {
      color: #1e293b;
      font-size: 1.05rem;
      font-weight: 800;
      margin-bottom: 20px;
      letter-spacing: -0.01em;
    }

    .legend-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    @media (max-width: 900px) {
      .legend-grid {
        grid-template-columns: 1fr;
      }
    }

    .legend-item {
      display: flex;
      align-items: start;
      gap: 14px;
    }

    .legend-icon {
      padding: 10px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2px;
      border: 1px solid;
    }

    .legend-icon.needs {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border-color: #93c5fd;
    }

    .legend-icon.needs svg {
      width: 18px;
      height: 18px;
      color: #2563eb;
    }

    .legend-icon.can-send {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      border-color: #6ee7b7;
    }

    .legend-icon.can-send svg {
      width: 18px;
      height: 18px;
      color: #059669;
    }

    .legend-icon.neutral {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border-color: #cbd5e1;
    }

    .legend-icon.neutral svg {
      width: 18px;
      height: 18px;
      color: #64748b;
    }

    .legend-text-title {
      color: #1e293b;
      margin-bottom: 6px;
      font-weight: 800;
      font-size: 0.9rem;
    }

    .legend-text-desc {
      color: #64748b;
      font-size: 0.8rem;
      font-weight: 500;
      line-height: 1.5;
    }

    /* Gráfico de Umidade */
    .humidity-card {
      background: #F9FAFB;
      border-radius: 16px;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.02);
      border: 1px solid #DCE2E8;
      padding: 36px 32px;
    }

    .humidity-header {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-bottom: 28px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e2e8f0;
    }

    .humidity-icon-box {
      padding: 14px;
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border: 1px solid #93c5fd;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .humidity-icon-box svg {
      width: 28px;
      height: 28px;
      color: #2563eb;
    }

    .humidity-title {
      color: #1e293b;
      font-size: 1.3rem;
      font-weight: 800;
      margin-bottom: 6px;
      letter-spacing: -0.02em;
    }

    .humidity-subtitle {
      color: #64748b;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .humidity-alert {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 14px 20px;
      background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
      border: 1.5px solid #fca5a5;
      border-radius: 12px;
      width: fit-content;
      margin: 28px auto 0;
    }

    .humidity-alert svg {
      width: 18px;
      height: 18px;
      color: #dc2626;
    }

    .humidity-alert span {
      color: #991b1b;
      font-size: 0.9rem;
      font-weight: 700;
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <div class="header-left">
        <div class="header-icon-box">
          <i data-lucide="activity"></i>
        </div>
        <div class="header-text">
          <h1>Sistema de Monitoramento de Hardware</h1>
          <p>Ventiladores Pulmonares Hospitalares — São Paulo</p>
        </div>
      </div>
      <div class="header-status">
        <div class="status-dot"></div>
        <span>Sistema Operacional</span>
      </div>
    </div>
  </header>

  <!-- Container Principal -->
  <div class="container">
    <!-- Banner de Análise Geral -->
    <div class="analysis-banner">
      <div class="analysis-grid">
        <!-- Análise de Risco -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon red">
              <i data-lucide="alert-triangle"></i>
            </div>
            <div>
              <h3 class="analysis-title">Análise de Risco</h3>
              <p class="analysis-subtitle">Período atual e histórico</p>
            </div>
          </div>
          <div class="risk-box">
            <div class="risk-grid">
              <div class="risk-item">
                <div class="risk-item-label">Relatório Histórico</div>
                <div class="risk-item-value">Pico de Umidade</div>
                <div class="risk-item-sub">Ago/Set - 3 meses atrás</div>
              </div>
              <div class="risk-item">
                <div class="risk-item-label">Risco Atual</div>
                <div class="risk-item-value danger">Alto</div>
                <div class="risk-item-sub">Nov/Dez - Alta Demanda</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Áreas Críticas -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon orange">
              <i data-lucide="file-text"></i>
            </div>
            <div>
              <h3 class="analysis-title">Áreas Críticas</h3>
              <p class="analysis-subtitle">Necessitam atenção imediata</p>
            </div>
          </div>
          <div class="critical-areas" id="criticalAreasContainer">
            <!-- Preenchido via JavaScript -->
          </div>
        </div>

        <!-- Recomendação -->
        <div class="analysis-section">
          <div class="analysis-header">
            <div class="analysis-icon blue">
              <i data-lucide="lightbulb"></i>
            </div>
            <div>
              <h3 class="analysis-title">Recomendação</h3>
              <p class="analysis-subtitle">Ação prioritária sugerida</p>
            </div>
          </div>
          <div class="recommendation-box">
            <div class="recommendation-value">Reforçar UTI e PS</div>
            <div class="recommendation-sub">Ação prioritária</div>
            <div class="recommendation-action">
              <i data-lucide="arrow-right"></i>
              <span>Remanejamento recomendado: <span id="totalRelocate"></span> ventiladores disponíveis</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- KPIs Grid -->
    <div class="kpis-grid">
      <!-- KPI 1: Índice de Estabilidade -->
      <div class="kpi-card green">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="gauge"></i>
          </div>
          <h3 class="kpi-title">Índice de Estabilidade</h3>
        </div>
        <p class="kpi-value"><span id="stabilityIndex"></span>%</p>
        <p class="kpi-subtitle"><span id="stabilityText"></span></p>
      </div>

      <!-- KPI 2: Alertas de Hardware -->
      <div class="kpi-card red">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="alert-triangle"></i>
          </div>
          <h3 class="kpi-title">Alertas de Hardware</h3>
        </div>
        <p class="kpi-value"><span id="totalAlerts"></span> Alertas</p>
        <p class="kpi-subtitle"><span id="criticalAreaText"></span></p>
      </div>

      <!-- KPI 3: Remanejamento Disponível -->
      <div class="kpi-card teal">
        <div class="kpi-bg-circle"></div>
        <div class="kpi-header">
          <div class="kpi-icon">
            <i data-lucide="refresh-ccw"></i>
          </div>
          <h3 class="kpi-title">Remanejamento Disponível</h3>
        </div>
        <p class="kpi-value"><span id="totalCanRelocate"></span> Unidades</p>
        <p class="kpi-subtitle">Podem ser redistribuídas para áreas críticas</p>
      </div>
    </div>

    <!-- Distribuição de Ventiladores -->
    <div class="distribution-card">
      <div class="distribution-header">
        <div class="distribution-title-area">
          <div class="distribution-icon-box">
            <i data-lucide="wind"></i>
          </div>
          <div>
            <h2 class="distribution-title">Distribuição e Balanceamento de Ventiladores</h2>
            <p class="distribution-subtitle">Monitoramento de hardware e recomendações de remanejamento por área hospitalar</p>
          </div>
        </div>
        <div class="distribution-total">
          <div class="distribution-total-label">Total de Ventiladores</div>
          <div class="distribution-total-value"><span id="totalVentilators"></span> unidades</div>
        </div>
      </div>

      <!-- Grid de Áreas -->
      <div class="areas-grid" id="areasGrid">
        <!-- Preenchido via JavaScript -->
      </div>

      <!-- Legenda -->
      <div class="legend-section">
        <h3 class="legend-title">Legenda de Interpretação</h3>
        <div class="legend-grid">
          <div class="legend-item">
            <div class="legend-icon needs">
              <i data-lucide="arrow-down-circle"></i>
            </div>
            <div>
              <div class="legend-text-title">Necessita Ventiladores</div>
              <div class="legend-text-desc">Áreas que precisam receber ventiladores adicionais para atender a demanda crítica</div>
            </div>
          </div>
          <div class="legend-item">
            <div class="legend-icon can-send">
              <i data-lucide="arrow-up-circle"></i>
            </div>
            <div>
              <div class="legend-text-title">Pode Enviar</div>
              <div class="legend-text-desc">Áreas com capacidade de ceder ventiladores (até 70% do total) para outras áreas</div>
            </div>
          </div>
          <div class="legend-item">
            <div class="legend-icon neutral">
              <i data-lucide="minus-circle"></i>
            </div>
            <div>
              <div class="legend-text-title">Status Neutro</div>
              <div class="legend-text-desc">Áreas com capacidade estável, sem necessidade ou disponibilidade de transferência</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Gráfico de Umidade -->
    <div class="humidity-card">
      <div class="humidity-header">
        <div class="humidity-icon-box">
          <i data-lucide="droplets"></i>
        </div>
        <div>
          <h3 class="humidity-title">Evolução Mensal da Umidade</h3>
          <p class="humidity-subtitle">Dados ambientais — São Paulo</p>
        </div>
      </div>
      <div id="humidityChart" style="height: 280px;"></div>
      <div class="humidity-alert">
        <i data-lucide="alert-triangle"></i>
        <span>Pico do período: Agosto (94%)</span>
      </div>
    </div>
  </div>

  <script>
    // Dados de Ventiladores por Área
    const ventilatorAreas = [
      {
        name: "UTI",
        total: 20,
        stable: 17,
        alerts: 3,
        risk: 15,
        needsToReceive: 5, // Precisa receber
        cpuAvg: 68,
        batteryAvg: 92,
        trend: "up"
      },
      {
        name: "Pronto Socorro",
        total: 12,
        stable: 8,
        alerts: 4,
        risk: 33,
        needsToReceive: 3, // Precisa receber
        cpuAvg: 75,
        batteryAvg: 85,
        trend: "up"
      },
      {
        name: "Cirurgia",
        total: 6,
        stable: 5,
        alerts: 1,
        risk: 17,
        needsToReceive: 0, // Não precisa
        cpuAvg: 52,
        batteryAvg: 95,
        trend: "down"
      },
      {
        name: "Enfermaria",
        total: 2,
        stable: 1,
        alerts: 1,
        risk: 50,
        needsToReceive: 2, // Precisa receber
        cpuAvg: 82,
        batteryAvg: 78,
        trend: "down"
      },
      {
        name: "Pediatria",
        total: 3,
        stable: 2,
        alerts: 1,
        risk: 33,
        needsToReceive: 1, // Precisa receber
        cpuAvg: 71,
        batteryAvg: 88,
        trend: "down"
      }
    ];

    // Calcular totais
    const totalVentilators = ventilatorAreas.reduce((sum, area) => sum + area.total, 0);
    const totalStable = ventilatorAreas.reduce((sum, area) => sum + area.stable, 0);
    const totalAlerts = ventilatorAreas.reduce((sum, area) => sum + area.alerts, 0);
    const stabilityIndex = Math.round((totalStable / totalVentilators) * 100);
    const highestRiskArea = ventilatorAreas.reduce((max, area) => area.risk > max.risk ? area : max);
    const areasNeedingReinforcement = ventilatorAreas.filter(area => area.risk >= 30);

    // Calcular capacidade de envio (máximo 70% do total)
    ventilatorAreas.forEach(area => {
      const maxCanSend = Math.floor(area.total * 0.7);
      area.canSend = area.needsToReceive === 0 ? maxCanSend : 0;
    });

    // Identificar áreas que precisam e áreas prioritárias
    const areasNeedingVentilators = ventilatorAreas.filter(area => area.needsToReceive > 0);
    const primaryTarget = areasNeedingVentilators.sort((a, b) => b.risk - a.risk)[0]; // Área com maior risco

    const totalCanRelocate = ventilatorAreas.reduce((sum, area) => sum + area.canSend, 0);

    // Preencher KPIs
    document.getElementById('stabilityIndex').textContent = stabilityIndex;
    document.getElementById('stabilityText').textContent = `${totalStable} de ${totalVentilators} ventiladores estáveis`;
    document.getElementById('totalAlerts').textContent = totalAlerts;
    document.getElementById('criticalAreaText').textContent = `Área mais crítica: ${highestRiskArea.name} (${highestRiskArea.risk}%)`;
    document.getElementById('totalCanRelocate').textContent = totalCanRelocate;
    document.getElementById('totalRelocate').textContent = totalCanRelocate;
    document.getElementById('totalVentilators').textContent = totalVentilators;

    // Função para obter cor de risco badge
    function getRiskBadgeClass(risk) {
      if (risk <= 20) return 'green';
      if (risk <= 35) return 'yellow';
      return 'red';
    }

    // Preencher Áreas Críticas
    const criticalAreasContainer = document.getElementById('criticalAreasContainer');
    areasNeedingReinforcement.forEach(area => {
      const badgeClass = getRiskBadgeClass(area.risk);
      const div = document.createElement('div');
      div.className = 'critical-area-item';
      div.innerHTML = `
        <div class="critical-area-left">
          <div class="critical-dot ${badgeClass}"></div>
          <span class="critical-area-name">${area.name}</span>
        </div>
        <div class="critical-area-right">
          <span class="critical-badge ${badgeClass}">
            ${area.risk}% risco
          </span>
          <span class="critical-alerts">${area.alerts} alertas</span>
        </div>
      `;
      criticalAreasContainer.appendChild(div);
    });

    // Preencher Grid de Áreas
    const areasGrid = document.getElementById('areasGrid');
    ventilatorAreas.forEach(area => {
      const stabilityPercent = Math.round((area.stable / area.total) * 100);

      // Determinar tipo de área
      let areaType = 'neutral';
      let badgeText = 'Estável';
      let badgeClass = 'neutral';
      
      if (area.needsToReceive > 0) {
        areaType = 'needs-ventilators';
        badgeText = 'Necessita';
        badgeClass = 'needs';
      } else if (area.canSend > 0) {
        areaType = 'can-send';
        badgeText = 'Disponível';
        badgeClass = 'can-send';
      }

      const areaCard = document.createElement('div');
      areaCard.className = `area-card ${areaType}`;
      
      // Gerar recomendação ou envio
      let actionHTML = '';
      if (area.needsToReceive > 0) {
        // Área PRECISA receber
        actionHTML = `
          <div class="recommendation-box-area">
            <div class="recommendation-header">
              <i data-lucide="lightbulb"></i>
              <span class="recommendation-label">Recomendação</span>
            </div>
            <div class="recommendation-text">
              Adicionar <strong>+${area.needsToReceive} ventiladores</strong>
            </div>
          </div>
          <div class="available-box">
            <div class="available-left">
              <i data-lucide="package"></i>
              <span class="available-label">Disponíveis para envio</span>
            </div>
            <span class="available-value zero">0</span>
          </div>
        `;
      } else if (area.canSend > 0 && primaryTarget) {
        // Área PODE enviar
        actionHTML = `
          <div class="send-box-area">
            <div class="send-header">
              <i data-lucide="send"></i>
              <span class="send-label">Pode Enviar</span>
            </div>
            <div class="send-text">
              Enviar <strong>${Math.min(area.canSend, primaryTarget.needsToReceive)} ventiladores</strong> para ${primaryTarget.name}
            </div>
          </div>
          <div class="available-box">
            <div class="available-left">
              <i data-lucide="package"></i>
              <span class="available-label">Disponíveis para envio</span>
            </div>
            <span class="available-value positive">${area.canSend}</span>
          </div>
        `;
      } else {
        // Neutro
        actionHTML = `
          <div class="available-box">
            <div class="available-left">
              <i data-lucide="package"></i>
              <span class="available-label">Disponíveis para envio</span>
            </div>
            <span class="available-value zero">0</span>
          </div>
        `;
      }

      areaCard.innerHTML = `
        <div class="area-header">
          <h3 class="area-name">${area.name}</h3>
          <div class="area-badge ${badgeClass}">${badgeText}</div>
        </div>
        
        <div class="area-stats">
          <div class="stat-item">
            <div class="stat-label">Atual</div>
            <div class="stat-value">${area.total}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Pode Ceder</div>
            <div class="stat-value success">${area.canSend}</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Precisa</div>
            <div class="stat-value highlight">${area.needsToReceive}</div>
          </div>
        </div>
        
        <div class="stability-section">
          <div class="stability-header">
            <span class="stability-label">Estabilidade</span>
            <span class="stability-percent">${stabilityPercent}%</span>
          </div>
          <div class="stability-bar">
            <div class="stability-bar-fill" style="width: ${stabilityPercent}%"></div>
          </div>
        </div>
        
        <div class="status-grid">
          <div class="status-item stable">
            <i data-lucide="check-circle-2"></i>
            <span>${area.stable}</span>
          </div>
          <div class="status-item alert">
            <i data-lucide="x-circle"></i>
            <span>${area.alerts}</span>
          </div>
        </div>
        
        <div class="hardware-section">
          <div class="hardware-label">Médias de Hardware</div>
          <div class="hardware-metrics">
            <div class="hardware-item">
              <div class="hardware-item-left cpu">
                <i data-lucide="cpu"></i>
                <span class="hardware-item-label">CPU média</span>
              </div>
              <span class="hardware-item-value ${area.cpuAvg > 75 ? 'warning' : 'normal'}">${area.cpuAvg}%</span>
            </div>
            <div class="hardware-item">
              <div class="hardware-item-left battery">
                <i data-lucide="battery"></i>
                <span class="hardware-item-label">Bateria média</span>
              </div>
              <span class="hardware-item-value ${area.batteryAvg < 80 ? 'warning' : 'normal'}">${area.batteryAvg}%</span>
            </div>
          </div>
        </div>
        
        ${actionHTML}
      `;
      
      areasGrid.appendChild(areaCard);
    });

    // Inicializar ícones Lucide
    lucide.createIcons();

    // Dados de Umidade
    const humidityData = [
      { month: 'Jan', value: 65 },
      { month: 'Fev', value: 67 },
      { month: 'Mar', value: 70 },
      { month: 'Abr', value: 69 },
      { month: 'Mai', value: 70 },
      { month: 'Jun', value: 72 },
      { month: 'Jul', value: 75 },
      { month: 'Ago', value: 94 },
      { month: 'Set', value: 87 },
      { month: 'Out', value: 76 },
      { month: 'Nov', value: 74 },
      { month: 'Dez', value: 0 },
    ];

    // Renderizar Gráfico de Umidade com ApexCharts
    const humidityOptions = {
      chart: {
        type: 'bar',
        height: 280,
        toolbar: { show: false },
        fontFamily: 'Inter, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif'
      },
      series: [{
        name: 'Umidade',
        data: humidityData.map(d => d.value)
      }],
      xaxis: {
        categories: humidityData.map(d => d.month),
        labels: {
          style: {
            colors: '#475569',
            fontSize: '12px',
            fontWeight: 600,
            fontFamily: 'Inter, sans-serif'
          }
        },
        axisBorder: { show: true, color: '#cbd5e1' },
        axisTicks: { show: false }
      },
      yaxis: {
        labels: {
          style: {
            colors: '#475569',
            fontSize: '12px',
            fontWeight: 600,
            fontFamily: 'Inter, sans-serif'
          }
        }
      },
      dataLabels: {
        enabled: true,
        style: {
          fontSize: '12px',
          fontWeight: 700,
          colors: ['#fff'],
          fontFamily: 'Inter, sans-serif'
        },
        offsetY: -20
      },
      grid: {
        show: true,
        borderColor: '#e2e8f0',
        strokeDashArray: 3,
        xaxis: { lines: { show: false } }
      },
      colors: humidityData.map(d => d.month === 'Ago' ? '#ef4444' : '#3b82f6'),
      plotOptions: {
        bar: {
          distributed: true,
          borderRadius: 10,
          borderRadiusApplication: 'end',
          columnWidth: '60%'
        }
      },
      legend: { show: false },
      tooltip: {
        enabled: true,
        y: {
          formatter: function (val) { return val + '%' }
        },
        style: {
          fontFamily: 'Inter, sans-serif'
        }
      }
    };

    const humidityChart = new ApexCharts(document.querySelector("#humidityChart"), humidityOptions);
    humidityChart.render();
  </script>
</body>

</html>
